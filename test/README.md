
# 🧪 코드 전반에 대한 테스트 프로그램 (`test`)

이 디렉토리는 프로젝트의 핵심 로직인 **AI 서버 엔드포인트**와 **모델 재학습 파이프라인**의 안정성을 검증하는 **유닛 테스트(Unit Test)** 코드를 포함합니다. 모든 테스트는 Mocking을 사용하여 외부 의존성 없이 빠르고 안정적으로 실행됩니다.

---

## 📝 테스트 파일 목록

| 파일명 | 주요 검증 대상 | 설명 |
| :--- | :--- | :--- |
| **`test_main.py`** | **AI 서버 API (main.py)** | Flask 서버의 엔드포인트(`/, /detect`)가 올바른 HTTP 상태 코드와 JSON 응답을 반환하는지 검증합니다. 이미지 감지 성공 및 파일 누락 시의 에러 처리를 확인합니다. |
| **`test_train.py`** | **모델 재학습 로직 (train.py)** | 모델 학습 후 `config.ini` 파일의 `model_path` 업데이트 성공 여부를 검증합니다. 특히, 설정 파일 저장 실패 시 **원본 `config.ini`로 안전하게 복원**되는 핵심 로직을 테스트합니다. |

---

## 🎯 테스트 실행 방법

### 1. 테스트 실행

테스트는 Python의 `unittest` 프레임워크를 사용하여 프로젝트 **루트 디렉토리**에서 실행하는 것이 가장 좋습니다.

```bash
# 프로젝트 루트 디렉토리에서 실행
python -m unittest discover test
````

### 2\. 테스트 환경의 독립성

테스트 실행 시, 실제 `config.ini` 파일이 삭제되거나 내용이 변경되는 것을 방지하기 위해 다음과 같은 조치를 취하고 있습니다:

  * **원본 파일 보호:** `setUpClass`에서 기존 `config.ini` 파일을 백업하고, `tearDownClass`에서 테스트 후 반드시 **원래 상태로 복원**합니다.
  * **외부 의존성 Mocking:** 실제 YOLO 모델 학습이나 파일 시스템의 영구적인 변경은 `unittest.mock`을 사용하여 대체(Mocking)하므로, 테스트는 빠르고 안전하며 **반복 가능**합니다.

<!-- end list -->

```
